--  ===========================================================================
--  Hybrid_Lib_Ada SPARK Verification Project
--  ===========================================================================
--  Standalone project for SPARK formal verification of domain and application
--  layers. Excludes infrastructure (I/O adapters) and API (facade).
--
--  Usage:
--    cd test && alr exec -- gnatprove -P ../hybrid_lib_ada_spark.gpr --mode=check
--
--  Or for full proof:
--    cd test && alr exec -- gnatprove -P ../hybrid_lib_ada_spark.gpr --mode=prove --level=2
--  ===========================================================================

with "functional.gpr";

project Hybrid_Lib_Ada_SPARK is

   --  SPARK-eligible layers only: Domain + Application (ports/commands)
   --  Excluded: Infrastructure (I/O), API (depends on infrastructure)
   for Source_Dirs use
     ("src",
      "src/version",
      "src/domain",
      "src/domain/error",
      "src/domain/value_object",
      "src/application",
      "src/application/command",
      "src/application/error",
      "src/application/port",
      "src/application/port/inbound",
      "src/application/port/outbound",
      "src/application/usecase",
      "config/profiles/standard");

   for Object_Dir use "obj/spark";
   for Create_Missing_Dirs use "True";

   package Compiler is
      for Default_Switches ("Ada") use
        ("-gnat2022",
         "-gnatwa",
         "-gnatVa",
         "-gnata");
   end Compiler;

   package Prove is
      for Proof_Switches ("Ada") use
        ("--level=2",
         "--timeout=30",
         "--prover=cvc5,z3,altergo",
         "--warnings=continue",
         "--report=all");
   end Prove;

end Hybrid_Lib_Ada_SPARK;
